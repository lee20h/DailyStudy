# 코드 분석

## 1단계: 준비

1. 프로젝트의 개요 파악
    - 개발 및 실행 환경 요구 사항
        - 내가 환경을 구성하기에 적절한 자원(컴퓨팅 환경, 시간, 비용 등)을 갖고 있는가?
    - 문서 및 추가 자료들이 있는가?
        - 공식 사이트에 Documentation 이 잘 되어있어야 함
        - 구글 등 검색에서 나오는 자료들이 많아야 trouble shooting이 용이함
        - Project Community 의 규모가 클수록 자료도 많음
2. 실제 SW의 동작 확인
    - 실행 환경을 구성해보지 않고도 미리 수행해볼 수 있다면 매우 좋음
        - 예) 소스 코드가 아니라도 실행 파일이 있거나, 앱이 있거나.
    - 수정할 대상이 될 기존 기능의 동작을 확인
3. 수정할 기능의 구상
    - 어떤 기능을 수정, 추가할 것인가?
        - 실제 사용해보면서 하려고 하는 일의 정확한 요구 사항을 파악해야 함
    - 구현이 가능할 것인지 미리 예측을 해봄
        - 겉으로 파악할 수 있는 세부 동작을 추측해가며 기능의 구현 방향을 다양하게 구상해보고, 난이도를 미리 예측해보아야 함
4. 빌드 및 실행 환경 구성
    - Build environment 의 구성에 관한 문서를 찾고 그에 따라 환경 구성
        - 뭔가 복잡한데 아무런 문서가 없으면…빠르게 포기하자
5. 빌드 후 정상 동작의 확인
    - 실행 환경을 구성하고 수정하고자 하는 기능의 정상 동작을 확인
    - Debug 모드가 있는지 확인하고, 있다면 Debug mode 로 작업

## 2단계: 구조 분석 (architecture)

1. Documents 확보
    - 전체적인 구조 및 세부 컴포넌트에 관한 Document 검색 및 확보
    - 버전을 잘 확인하면서 볼 것
2. 전체적인 구조와 각 컴포넌트의 역할, 인터페이스 파악
    - 구조를 설명하는 main document 전체를 처음 한 번은 정독하자
    - 당장 연관이 없어 보이더라도 소스코드를 볼 때 큰 도움이 됨
3. 수정 기능과 연관있는 세부 컴포넌트의 세부 역할 파악
4. 연관된 컴포넌트들 간의 인터페이스 파악

## 3단계: 코드 분석

1. Document에 따라 코드 분석의 진입점을 설정
    - Top-down: 동작 방식(event driven, procedure 등)에 따라 main() 함수 와 같이 뼈대가 되는 코드부터 call chain을 따라가며 수정하고자 하는 코드까지 trace를 진행
    - Bottom-up: 수정하고자 하는 코드를 바로 접근하고, 해당 코드를 호출하는 함수들을 추적해나가며 전체 구조를 파악
2. 수정하고자 하는 코드의 동작을 확인
    - 우선 코드에 존재하는 주석들을 통해 코드 전체의 흐름 파악
    - 간단한 debugging message를 통해 세부적인 사항 파악: 변수 및 sub-function의 기능 확인
3. 관련된 코드, 컴포넌트와의 연관 관계를 파악
    - 컴포넌트, 함수들 간의 관계를 잘 분리해서 설계하지 않은 코드의 경우, 해당 코드를 수정하면 다른 코드에 영향을 미치는 경우가 있음
    - 전체 코드가 공유하는 자료 구조, 전역 변수 등을 확인해야 함
4. 코드 수정
    - 수정하고자 하는 기능의 형태, 동작을 설계하고,
    - **Divide & Conquer** 방식으로 진행할 수 있도록 구현의 단계를 세분화
    - 한 단계씩 진행하며 반드시 필요한 테스트들을 진행
    - 기존 코드 내용을 수정할 경우, 최소한 주석 처리를 해두거나, `#ifdef` 와 같은 전처리 명령을 이용해 수정한 부분을 기존 코드와 분리할 것
    - 해당 프로젝트의 code convention 을 잘 확인하고, 그에 따라 진행할 것