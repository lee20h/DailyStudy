# 자료흐름 중심 설계

자료흐름 중심 설계(Data Flow Oriented Design)

## 구조적 설계의 기본 개념

- 구조적 분석기법에서 사용하는 **자료흐름도**(DFD)가 논리적인 관점에서 자료흐름과 기능을 기술한다고 하면, 구조적 설계에서 사용하는 **구조도표**(structure chart)는 소프트웨어의 구조와 설계를 구체적으로 나타내는데 사용된다.
- 구조적 설계는 사용자의 요구사항이 자료흐름도로 표시되어 있음을 가정하고 있다.
- 자료흐름을 나타내는 표기법은 다른 많은 공학과 학문 분야에서도 오랫동안 사용되어 왔다. 소프트웨어 분야에서는 이러한 표기법이 구조적 설계 기법을 만들어낸 저자들에 의하여 소개되어 사용되었다.

### 프로그램 구조

- 구조적 설계를 위한 입력은 DFD에 기초한 요구사항 명세서이다.
- 구조적 설게는 DFD에 포함되어 있는 정보를 프로그램 구조의 모습을 가진 설계로 전이하는데 요구되는 가이드라인과 법칙들을 제공하고 있다.
- 프로그램 구조는 소프트웨어 모듈들 사이의 제어를 보여주는 계층적인 구조를 가지고 있다.
- **프로그램 구조**는 서로 연결되어 있는 소프트웨어 모듈들로 구성되어 있다. 또한 프로그램 구조는 호출하는 모듈과 호출되는 모듈 사이의 관계를 나타내어 준다.

### 구조도표의 표기법

- 구조도표(structure chart)는 모듈간의 자료와 제어 정보의 교환, 주요 루프, 의사 결정 등을 보여 주며, 설계 단계에서 모듈체게와 모듈들 사이의 상호교류 내용을 나타내주는 모델
- 구조도표는 구조적 설계(architectural design)의 결과를 나타내는데 사용되며, 소프트웨어 시스템이 상호 유기적인 관계를 가지고 작용하는 기능들로 분할된 모습을 보여 준다.
- 구조도표에서 사각형은 모듈을 나타내며, 오각형으로 표시된 것은 다른 페이지로 연결(off-page connector)되어 있는 모듈을 나타낸다.
- 또한 모듈사이의 정보흐름은 작은 원이 있는 화살표로 표시되어 있으며, 속이 하얀 것은 데이터 흐름(data flow)을 나타내고 속이 까만 것은 제어흐름(control flow)을 나타낸다.

## 정보 흐름의 유형

- 자료흐름도는 시스템의 자료흐름과 자료처리 기능을 보여준다. 프로세스의 동작을 크게 두 가지의 유형으로 나눠 볼 수 있다.
- **변환흐름**: 입력을 받아들여 가공 처리한 후 새로운 결과물을 만들어 내는 프로세스를 들 수 있다. 이 경우 입력을 가공처리하는 기능을 수행하며 출력물은 입력을 정제한 것이라 볼 수 있다.
- **트랜잭션흐름**: 입력을 받아들여 입력 값에 의해 결정을 내린 후 입력과 관계없는 결과물을 출력하는 경우이다. 이 경우 프로세스는 주어진 입력에 의해 결정을 내리며 서로 다른 처리동작을 수행하여 출력물을 생성하는 것이다.

### 자료 흐름 프로그램 구조로 전환

1. 우선 요구사항 분석에서 나온 결과를 검토하고 필요하면 수정한다.
2. 자료흐름의 유형을 조사한다. 자료흐름 유형은 변환흐름과 트랜잭션 흐름이 있다.
3. 자료흐름의 유형에 따라 흐름의 경계를 정한다.
4. 자료흐름도를 프로그램 구조로 매핑시킨다.
5. 분할하여 제어계층 구조를 정의한다. 상위 레벨부터 분할하여 하위레벨로 내려가는 하향식 접근방법을 사용한다.
6. 결과를 설계의 가이드라인과 시스템의 특성을 고려하여 다듬는다.

## 변환흐름 중심 설계

- 변환흐름 중심 설계는 정보를 받아들여 가공처리한 후 그 결과를 외부세계에 출력하는 시스템을 이에 합당한 컴퓨터 구조로 매핑시키는 기법
- 이 기법은 시스템을 구성요소들로 분할시켜주며 기본적인 기능을 수행하는 모듈들과 모듈들 사이의 계층구조를 생성한다.
- 변환흐름 중심은 시스템을 3가지로 나눌 수 이싿.
    - 입력흐름: 입력을 받아들여 시스템에서 사용할 수 있는 데이터로 정제하는 일을 수행한다.
    - 변환중심: 데이터를 가공처리하는 기능을 담당한다. 계산을 수행하는 대부분의 프로세스들이 이 범주에 들어간다고 할 수 있다.
    - 출력흐름: 가공처리된 정보를 받아 적당한 출력물로 변환시켜 출력한다.

### 변환흐름 중심 시스템

`외부입력 -> 입력접수 -> 정제된 입력 -> 입력 가공 -> 결과물 -> 출력생산 -> 출력`

### 프로그램 구조로 전환 가이드라인과 단계

- 1단계: 요구사항 명세서로부터 정제된 자료흐름도를 만든다.
    - 구조적 기법에서 요구사항 명세서는 균형을 이루며 계층적인 구조를 띈 자료흐름도의 집합이다.
    - 최상위 계층의 자료흐름도인 배경도와 다이어그램은 구체적인 정보흐름을 나타내기 어려우며, 각각의 하위계층 자료흐름도는 구체적인 정보흘므을 나타내나 한정된 부분의 내용만을 포함하고 있다.
    - 상위 계층으로부터 하위 계층으로 내려가며 하위 계층의 자료흐름도를 상위 계층의 자료흐름도에 합하여 하나의 자료흐름도를 만든다.

- 2단계: 자료흐름의 유형을 조사한다.
    - 자료흐름도가 변환흐름 특성을 갖는지, 아니면 트랜잭션흐름을 갖는지 결정한다.
    - 만약 자료흐름도가 이와 같이 변환흐름을 주요 특성으로 가지고 있으면 다음 단계들을 적용하여 프로그램 구조를 만든다.

- 3단계: 입력경계와 출력경계를 정한다.
    - 입력 경계와 출력 경계를 명시함으로써 변환 중심을 고립시킬 수 있다. 이 단계는 3가지 세부 단계로 구성되어 있다.
    - 3.1단계: 입력 흐름과 관계되는 버블들을 규명한다. 이는 시스템의 외부객체로부터 자료흐름을 추적하여 외부와 연결된 모습을 조사하여 규명할 수 있다.
        - `회전수 -> 회전수 접수 -> 초당 회전수 -> 거리계산 -> 거리 -> + 시간 -> 속도계산 -> 속도`
    - 3.2단계: 출력흐름과 관계되는 버블들을 규명한다. 시스템의 내부 버블로부터 외부객체로 이동하는 자료흐름을 추적하여 규명할 수 있다.
    - 3.3단계: 입력흐름에 속한 버블과 출력흐름에 속한 버블들을 규명한다.
    
    - 입력되는 자료흐름의 경계는 외부객체로부터 들어오는 정제되지 않은 자료로 부터 시작하여 시스템에 입력으로 작용하는 정제된 자료를 만들어내는 가장 멀리 떨어진 버블을 포함한다.

- 4단계: 최상위 수준에서 자료흐름 중심 프로그램 구조 개발
    - 이제 자료흐름 중심의 프로그램 구조를 만들기 시작한다.
    - 이 과정은 Yourdon에 의해 '최상위 수준의 세분화'라 불러지며, 세분화는 분할을 의미한다.
    - 상위계층의 모듈은 시스템의 기능을 수행하지 않고, 다만 이러한 기능이 하위계층 모듈에 의해 수행될 수 있도록 분류하고 이관하는 일을 담당하도록 설계한다.
    - 최상위 수준의 세분화는 최상위 프로그램 구조를 얻는데 그 목적이 있다. 최상위 수준의 프로그램 구조는 추후 세부적이고 정제된 프로그램 구조를 얻는 출발점이 된다.

    - 변환흐름 중심의 자료흐름도에서 최상위 프로그램 구조의 3가지의 구성요소
        - 입력을 처리하는 입력 제어 모듈
        - 변환을 처리하는 변환 제어 모듈
        - 출력을 처리하는 출력 제어 모듈

- 5단계: 자료흐름도를 프로그램 구조로 전환 (두번째 수준의 세분화)
    - 입력 제어 모듈에 대한 세분화 작업은 다음과 같이 이뤄진다.
        - 입력 제어모듈에서 주모듈에 제공하는 입력 자료들을 규명한다.
        - 이 입력 자료를 만들기 위해 **요구되는 변환과 이를 수행하는 버블들을 규명**한다.
        - 변환을 수행하는 버블에 대응하는 변환 모듈을 만든다. 이 모듈은 상위 입력 모듈 아래에 둔다.
        - 변환 모듈에 입력을 제공하는 입력 모듈을 변환 모듈과 같은 계층에 놓는다.
        - 새로이 만들어진 하위 계층 입력 모듈을 세분화해 나간다.
    - 출력 제어 모듈에 대한 세분화 작업은 앞 작업의 역순으로 이뤄지며 다음과 같다.
        - 주모듈에 의해 **출력 제어 모듈에 제공되는 출력 자료들을 규명**한다.
        - 외부에서 보여지는 양식에 접근된 출력 자료를 만들기 위해 요구되는 변환과 이를 수행하는 버블을 규명한다.
        - 변환을 수행하는 버블에 대응하는 변환 모듈을 만든다. 이 모듈은 상위 입력 모듈 아래에 둔다.
        - 변환 모듈의 출력을 처리하는 출력 모듈을 변환 모듈과 같은 계층에 놓는다.
        - 새로이 만들어진 하위 계층 출력 모듈을 세분화해 나간다.

    - 입력흐름의 세분화
        - 변환중심과의 경계로부터 외부 입력을 받아들이는 방향으로 나악며 추가적인 세분화와 매핑이 이뤄진다.
        - 세분화는 **프로그램 구조의 상위 계층 모듈을 먼저 정의하고 아래**로 내려가며, 자료흐름도에서는 변환 중심과의 경계로부터 **왼쪽으로 진행**된다.
        - 자료흐름도의 버블은 일반적으로 **프로그램 구조의 모듈과 일 대 일**로 매핑된다.

    - 출력흐름에 대한 세분화 순서
        - 변환중심과의 경계에 가까운 버블로부터 시작하여 외부에 나가는 출력자료를 만드는 방향으로 이뤄진다.
        - 즉 자료흐름도의 중앙에서 시작하여 출력을 내보내는 오른쪽으로 이동하며 세분화는 프로그램 구조의 아래 방향으로 이뤄진다.

    - 변환중앙에 있는 모듈에 대한 세분화
        - 자료흐름도의 변환중앙에 있는 각 버블은 프로그램 구조의 새로운 모듈로 매핑될 수 있다.
        - 모든 변환 모듈들이 변환 제어 모듈의 아래에 올 수 있다. 즉 모든 변환 모듈은 변환 제어 모듈 바로 아래 계층의 모듈로 나타낼 수 있음을 의미한다.

두 번째 수준의 세분화
![image](https://user-images.githubusercontent.com/59367782/99963630-64f51780-2dd5-11eb-9203-7908186a35d6.png)


- 6단계: 프로그램 구조의 정제
    - 모듈 제거, 추가
    - 세분화, 통합

## 트랜잭션흐름 중심 설계

- 대부분의 시스템이 전체적인 관점에서 보면 변환흐름 중심이지만, 세부적인 경우를 들여다 보면 많은 경우 트랜잭션흐름 중심 설계가 프로그램 구조를 만드는데 사용될 수 있다.
- 트랜잭션이란 자료나 제어 시그널 등이 어떠한 행위를 유발시키는 것을 의미한다.
- 트랜잭션흐름에 의한 설계는 **들어온 입력을 여러 갈래의 출력흐름**으로 쪼갤 수 있는 경우에 가능하다.
- 이 경우 정보흐름의 중심을 **트랜잭션 중심**이라고 한다.

### 트랜잭션 중심 전환 가이드라인과 단계

- 1단계: 요구사항 명세서로부터 하나의 자료흐름도를 만든다.
- 2단계: 자료흐름도가 트랜잭션흐름을 갖는지 결정한다.
- 3단계: 트랜잭션 중심과 동작 경로를 파악한다.
    - 만약 자료흐름도가 트랜잭션흐름을 가지고 있는 경우 트랜잭션 중심이 어디있는가를 규명하는 일이 선행되어야 한다.
    - 트랜잭션 중심은 하나의 입력 경로와 여러 출력 경로를 가지고 있다. 각 동작 경로(출력 경로)는 여러 버블로 구성될 수 있으며, 변환흐름이나 트랜잭션흐름을 가질 수 있다.
- 4단계: 트랜잭션흐름 프로그램 구조 개발
    - 이 단계에서는 트랜잭션에 기초한 프로그램 구조를 만든다.
    - 이 구조는 세 구성 요소로 이뤄져 있다.
        - 트랜잭션 중심으로 작용하는 모듈
        - 입력을 받아들이는 모듈
        - 각 동작 경로에 **해당하는 하나 이상의 모듈**
- 5단계: 자료흐름도를 프로그램 구조로 매핑
    - 트랜잭션에 기초한 최초의 프로그램 구조가 만들어지고 난 후, 입력 제어와 각 동작 경로를 **세분화**하여 나갈 수 있다.
    - 각 경로마다 **새로이 프로그램 구조**를 만들어 나가는 것이라 볼 수 있으며 각 동작 경로와 입력 제어가 변환흐름 또는 트랜잭션흐름 중 어느 특징을 가지고 있는가 결정한다.
    - 동작 경로가 변환흐름을 가지고 있다고 하면 입력, 출력, 변환 중심의 경계를 정하게 된다. 또한 변환흐름에 적용될 수 있는 단계들이 적용된다.
    - 만약 동작 경로가 트랜잭션흐름을 가지고 있다고 하면 트랜잭션 중심과 동작 경로가 규명되고 트랜잭션흐름에 필요한 단계들이 적용된다.
    - 일반적으로 시스템은 변환흐름이 지배적이며 일부 트랜잭션 흐름을 가지고 있다.
    - 또한 일부 **트랜잭션흐름의 동작 경로**는 변환흐름의 특성을 가지며 다른 경로는 트랜잭션흐름 특성을 가질 수 있다.

- 6단계: 프로그램 구조 정제
    - 이 단계는 앞의 변환흐름에 기초한 프로그램 구조 정제 단계와 유사하다.
    - 변환흐름에 기초한 프로그램 구조가 정제되어야 하는 것과 마찬가지로 트랜잭션에 기초한 프로그램 구조도 정제되어야 한다.
    - 프로그램 구조는 **낮은 결합도와 높은 응집도를 얻을 수 있도록 세분화**되어야 하며, **구현과 시험이 용이하도록 프로그램 구조 정제 과정에서 세분화**되어야 한다.
    - 이러한 설계 방법은 기계적으로 이뤄지니 설계 단계에서 고려해야 하는 많은 요소들이 무시되어 이싿.
    - 결국 많은 경우 최적화가 필요하고, 이를 위해 환경과 응용분야에 대한 지식을 최대한 활용하여야 한다.

## 요약

- 구조적 설계는 구조적 분석기법으로 만들어진 요구사항 명세를 체계적으로 설계로 전환할 수 있도록 지원해주는 기법
- 구조적 설계는 **자료흐름도로 표시되어 있는 요구사항**을 **구조도표**로 표시하는 프로그램 구조로 전환한다.
- 자료흐름도에서 구조도표로의 전환은 요구사항 명세서에 표시되어 있는 **정보흐름의 유형을 판단**하여 이뤄진다.
- 일반적으로 두 가지 유형의 정보흐름이 있으며 **변환흐름**과 **트랜잭션흐름**이라 불리워진다.
- 구조적 설계는 시스템의 두 가지 유형에 따라 *요구사항을 설계로 매핑할 수 있는 단계와 가이드라인을 제시*하고 있다.
- 이러한 설계는 많은 정제를 필요로 하는 것이 일반적이며 좋은 프로그램 구조를 만들기 위해 설계 가이드라인이 적용된다. 이에 적용되는 기준으로는 *낮은 결합도, 높은 응집력, 구현과 시험의 용이성* 등이 있다.