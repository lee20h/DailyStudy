# 동적 모델링

- 많은 시스템들은 외부와의 반응이 요구되는 시간안에 이루어져야 하기 때문에 시간에 종속적
- 시간과 변호하의 관점에서 시스템을 묘사하는 것
- 동적 모델링에서는 시스템의 제어 흐름, 상호 작용, 동작의 순서를 다루게 되는데, 제어는 외부의 자극에 시스템이 어떠한 동작을 수행하는 지를 나타내는 것

![image](https://user-images.githubusercontent.com/59367782/97529375-21d0a000-19f3-11eb-92cd-0460703fbb60.png)

## 실시간 시스템

- 실시간 시스템은 제한된 시간내에 외부에서 주어진 사건에 응답해야하고 자료를 처리해야 한다.
- 실시간 시스템의 중요성은 빠른 속도로 증가하고 있으며 다양한 분야에서 복잡도가 증가
- **신뢰성**을 가진 실시간 시스템의 개발에 많은 연구와 개발이 이뤄짐
- 특성상 다른 소프트웨어보다 어렵고 복잡하여 다른 시스템에서 요구하지 않는 특수항 분석, 설계, 시험 기법들 필요
- 특징으로는 여러 프로세스를 동시에 병행으로 수행하거나 프로세스의 처리에 우선 순위를 가지며 자원에 대한 동시 접근 및 할당을 하게되고 이를 제어하는 기능이 주어진다
- 대표적인 실시간 시스템은 통신 시스템, 비행기 운행 관리 시스템, 원자력 발전소의 원자로 제어장치, 군사용 미사일 시스템 등

## 상태변화도

상태변화도(STD)란 시스템의 제어 흐름, 동작의 순서를 다룬다. 상태와 사건에 의해 시스템의 제어를 나타내는 **유한 오토마타**를 확장하여 도식적으로 표현한 것이다.  
사건들에 의해 변화하는 시스템의 동작을 나타낸다.

중요한 개념 :
- **상태**
- **사건**

### 전화 시스템의 상태변화도

![image](https://user-images.githubusercontent.com/59367782/97529824-1631a900-19f4-11eb-91f2-95a5b91446c7.png)

시간 상에 따라서 Idle -> Dial tone -> Dialing -> Connecting -> Ringing -> Connected -> Disconnected

## 상태, 사건, 동작

- 상태는 시스템이 가지고 있는 속성값에 의해 결정되며 사건은 외부에서 주어진 자극에 의해 일어난다.
- 사건은 시스템을 어떤 한 상태에서 다른 상태로 이동하게 하여 시스템의 상태를 바꾸게 할 수도 있고 그 외에도 또 다른 사건을 유발시킬 수 있다.
- 사건에 대한 반응은 그 사건을 받아들이는 시스템의 상태에 따라 다르다.
- 시스템의 상태, 사건, 상태의 변화 등이 상태변화도를 통해 구체적으로 나타난다.

**상태**와 **사건** 외에 상태변화도의 개념은 동작이라고 한다.
동작이란 사건과 관련된 것으로, 사건이 시스템의 특정한 상태에서 반응하는 것이다.

### 상태변화도 표기법

- 상태 추상화

![image](https://user-images.githubusercontent.com/59367782/97573387-04b8c300-1a2d-11eb-9094-c084935cb83b.png)

자동차 변속기에 대한 상태변화도로 중립, 후진, 전진 상태로 나뉘어지면 전진은 일단, 이단, 삼단을 묶어서 얘기한다. 해당 버튼을 통해서 상태는 언제나 변화할 수 있다. 일단, 이단, 삼단은 전부 OR 연산으로 이어져있다.

- 동시 수행

![image](https://user-images.githubusercontent.com/59367782/97573429-1ac68380-1a2d-11eb-81eb-eff409e08b67.png)

현금자동 교환기의 상태변화도 중 일부로, 점선을 통해서 카드와 원하는 현금을 내놓는 것을 동시에 수행한다는 것을 표현하였다. 또한 AND 연산으로 이어져있다.

- 조건 표시

![image](https://user-images.githubusercontent.com/59367782/97574124-1f3f6c00-1a2e-11eb-9bbe-916c57b69dbf.png)

온도 조절기의 상태변화도로 여러 조건에 의해서 상태가 온풍, off, 냉방으로 나뉘어질 수 있다.

- 상태의 변이와 동작

![image](https://user-images.githubusercontent.com/59367782/97574211-39794a00-1a2e-11eb-99f1-683381a1f417.png)

차고문의 상태변화도로, 상태에서 변이가 일어날 때 동작에 의해 다른 상태로도 변이할 수 있다.

- 상태와 사건의 일반적인 표기법

    - 동작은 시간이 걸리지 않고 일어나는 작용
    - 활동은 시간을 두고 일어나는 작용

![image](https://user-images.githubusercontent.com/59367782/97574439-95dc6980-1a2e-11eb-9501-064e08689ca7.png)

사건이 일어날 조건과 사건을 `/`을 통해서 묶었다.

## 전화 시스템 동적 모델링

- 쉽고 논리적인 상태변화도를 작성하기 위하여 시나리오 작성과 사건추적 과정을 이용
- 시나리오 : 시스템이 작동하며 일어나느 사건들의 순서. 보통 시나리오의 기술은 일반적인 경우와 예외적인 경우로 나뉘어짐
- 한 시나리오가 시스템의 모든 사건을 포함할 수도 있고 특정한 경우에 나타나는 사건만을 포함할 수도 있다. 따라서 일어날 수 있는 시나리오는 다양함

일반적으로 전화를 거는 경우와 존재하지 않는 번호에 전화를 거는 경우 두 가지로 일반적인 경우와 예외적인 경우를 나눠서 볼 수 있다.  

### 사건추적도

시나리오 작성 후 이것에 대한 사건추적을 하게 되는데 이러한 사건의 순서와 사건을 주고 받는 객체나 시스템을 보여주는 것이 사건추적도이다.  
객체나 시스템은 수직선, 사건은 수평, 사건을 보내는 객체에서 받는 객체로의 흐름은 화살표로 표시한다.  

가장 먼저 할 일은 사건추적에 참가할 객체를 선정하는 것이다. 이때 객체는 시나리오로부터 찾아낼 수 있다. 외부객체도 뽑아낸 뒤 이것들 사이의 사건 흐름을 찾아낸다. 이러한 흐름은 시나리오로부터 찾을 수 있다. 일반적으로 시나리오 하나마다 사건추적이 이뤄진다.  

### 상태변화도 작성

사건추적이 끝난 후 상태들과 사건들을 종합하여 상태변화도를 작성한다. 사건추적에 나타난 사건흐름이 그대로 상태변화도에서 상태변이를 일으키는 사건으로 이용되는 경우가 많다.  
객체에서 주고받는 사건과 사건의 사이가 그 객체의 상태가 되며, 동작과 활동을 추가한다.  

전이에서 나타나는 동작은 동작을 일으키는 사건 뒤에 빗금을 쳐서 표시한다. 위에서 말하였지만 동작은 순식간에 일어나는 작동이며 활동은 시간을 가지며 일어나는 작용이다. 또한 활동은 연속적인 작용을 포함하며 활동의 이름 앞에 `do:`를 표시한다.  

## 구조적 분석기법의 확장

구조적 분석기법은 많은 시스템들은 시간에 종속적이며 데이터는 물론 제어에 관한 정보를 포함하고 있다. 데이터와 이들의 처리 및 그 결과를 돌려주는 환경을 제어할 수 있도록 시스템을 기술한 것이다. 시스템의 상태변화와 프로세스들의 활성화를 나타내고자 할 때 사용한다.  

구조적 분석기법의 확장은 앞의 기능 모델과 동적 모델을 결합시킨 복합 모델로서 한 모델로 두 가지의 다른 면을 표시한다. 이는 한 모델로 한 관점만을 표시하는 단순함에서 탈피하여 한 모델로 두 관점을 합하여 표시함으로써, 두 관점의 연관성을 잘 보여주며 시스템 설계시 통합하기 쉽다는 장점이 있다.

### 복합 분석 모델

![image](https://user-images.githubusercontent.com/59367782/97576307-56fbe300-1a31-11eb-9573-05ea71030251.png)

### 실시간 확장 모델 표시 기호

구조적 분석기법 사용할 때 실시간 확장 모델 표시를 위한 기호표이다.

![image](https://user-images.githubusercontent.com/59367782/97576461-8dd1f900-1a31-11eb-87f6-c08cb5b29db1.png)

- 프로세스 : 시스템 안에서 정보를 처리하고 변환시키는 변환기
- 데이터 흐름 : 정보의 흐름을 표시하는 자료 항목 또는 데이터 단위
- 자료 저장소 : 오랫동안 보관되는 데이터를 저장하는 파일이나 데이터베이스 시스템
- 외부 객체 : 시스템의 외부에서 시스템과 정보를 주고 받는 사용자 등의 외부 객체
- 제어흐름 : 제어 흐름을 표시하는 제어 항목이며 화살표는 제어 흐름의 방향을 표시한다.
- 제어 명세 : 제어 신호를 처리하고 변환시키는 제어 명세서이다.

### 제어 명세서(Control Specification)

제어 명세서는 프로세스 명세서가 초보기능을 수행하는 프로세스를 기술하는데 이용된다. 따라서 시스템의 행위를 기술하는데 사용된다. 이러한 제어 명세서는 다양한 제어 흐름에 어떠한 동작 시나리오가 발생되었는지 보여준다.  

제어 명세서는 시스템의 동작을 잘 나타내 주어, 시스템 개발 초기에 문제점과 개발 후 시스템의 동작에 결함이 있는지를 쉽게 파악, 확인할 수 있게 해준다. 자료흐름도에서는 수직선 기호로 표시되어 있다.

- **프로세스활성표** (PAT : Process Activation Table)
- **결정표** (DT: Decision Table)
- **상태변화도** (STD: State Transition Diagram)
- **상태사건표** (SEM : State Event Matrix)

### 정보 흐름

- 데이터는 계산에 사용되어 새로운 데이터를 생성하거나 이를 변형시킬 때 사용
- 제어는 계산에 직접 사용되지 않는 대신 계산의 순서나 조건을 나타냄

연속적인 신호는 일반적으로 데이터로 분류된다. 그리고 이산 신호의 경우 프로세스 안에서 계산에 쓰이면 데이터, 프로세스를 제어하는데 사용되면 제어로 간주된다. 어떠한 신호는 양쪽으로 모두 분류될 수 있으며, 분류가 확실치 않으면 데이터로 가정한 다음 모델링을 구체화시켜 가며 그 결과를 확인해 볼 수 있다.  

제어 논리는 **조합 논리**와 **순열 논리**로 나눠서 볼 수 있다.  

- 순서에 상관없이 원하는 결과가 나타나면 조합논리
- 순서가 중요시 되는 순열논리

### 프로세스 활성표

프로세스 활성표는 주어진 사건에 의해 특정 프로세스를 활성화시키는 동작을 기술하는데 사용된다. 자료흐름도에 나타난 프로세스를 활성화 또는 비활성화시키기 위해 어떠한 입력 제어흐름값이 주어져야 하는지를 **테이블 형태**로 표시한다.  

### 결정표

시스템 제어의 표시는 프로세스 활성표만으로 충분치 못한 경우가 많다. 입력 제어 흐름을 수용하여 시스템이 사용하기 쉬운 새로운 흐름을 만들어 내는 경우가 흔하다.  

결정표는 한 프로세스와 연관된 모든 동작을 표시하거나 프로세스 수행 중 요구된느 결정이나 조건을 기술하는데 사용한다. 입력 제어 조건들의 순서는 고려하지 않는 조합 논리를 나타내는데 적합하며 출력값을 갖기 위해 요구되는 입력값을 테이블 형태로 나타낸다.

예를 들어 신호등 시스템의 결정표를 보면 보행자의 요구와 자동차가 접근이 동시에 일어나면 보행자에게 우선순위를 줘서 보행자에게 초록불을 켜주는 식이다.  

### 상태변화도

상태변화도가 구조적 분석 확장 모델에서 사용되는 방법만 알아보고, 이 부분에서는 크게 다루지 않는다. 순열 논리를 나타내는데 적합하다.

### 상태사건표

상태사건표는 상태변화도에 표현되어 있는 정보를 테이블 형태로 표현한 것이다. 열은 사건들을 표시하고 행은 상태를 나타낸다. 주어진 상태에서 어떤 사건이 발생되면 동작을 취하게 되고 새로운 상태로 옮겨가는 모습을 보여준다.

### 복합 제어 명세

여러 제어 명세가 혼합되어 시스템의 제어 기능을 나타내야 되는 경우, 프로세스 활성표, 결정표, 상태변화도, 상태사건표가 복합적으로 한 자료흐름도에 표시 될 수 있다.

## 요약

- 실시간 시스템의 중요성이 빠른 속도로 증가하고 있으며 다양한 응용 분야에 확산
- 실시간 시스템 개발에 동적 모델링은 중요한 역할 담당
- 동적 모델링은 시스템의 제어 흐름, 상호 작용, 동작의 순서 등을 다룸
- 실시간 시스템은 특서상 다른 소프트웨어 시스템보다 복잡하며 다른 시스템에서 요구하지 않는 특수한 분석, 설계, 시험 기법 등 필요

상태변화도를 중심으로 동적 모델링을 살펴봤고 구조적 분석기법에 시스템의 동적인 면을 추가한 확장 모델을 이용한 실시간 시스템 분석기법을 알아보았다. 