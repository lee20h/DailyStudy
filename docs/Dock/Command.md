---
sidebar: auto
---

# 도커 클라이언트 명령어

## 이미지 내부 파일 시스템

`docker run 이미지이름 커맨드`  

- docker : 도커 클라이언트 언급
- run : 컨테이너 생성 및 실행
- 이미지 이름 : 이 컨테이너를 위한 이미지
- 커맨드 : 이 자리는 원래 이미지가 가지고 있는 시작 명령어를 무시하고 여기에 있는 커맨드를 실행

예를 들어서 명령어를 통해 이해해보자.  
`docker run alpine ls` alpine 이미지의 명령어를 `ls`명령어로 대체하여 alpine 이미지에서 실행된다.  

하지만 전에 했던 명령어인 `docker run hello-world`를 ls 명령어를 이용해서 사용하게 되면 에러가 난다. 왜냐하면 alpine 이미지 파일 스냅샷 안에 ls를 사용 가능하게 하는 파일이 있기 때문이다. 즉, hello-world 이미지에는 ls을 실행하게 하는 파일이 없다.  

따라서 파일 하드디스크안에 들어오는 스냅샷에 무엇이 있는지에 따라서 커맨드의 사용 가능 여부가 결정된다.  

## 컨테이너 나열

`docker ps`를 통해서 도커 클라이언트의 process status을 체크해보자. 

1. `docker alpine ping localhost`를 통해서 핑을 계속 보낸다.

2. 다른 터미널에서 `docker ps`를 통해서 컨테이너들을 확인해본다.

이러한 방법으로 체크를 하게 되면 컨테이너를 확인할 수 있다. 이때의 속성들을 적어봤다.  

- CONTAINER ID : 컨테이너의 고유한 아이디 해시값으로 일부분만 출력
- IMAGE : 컨테이너 생성시 사용한 도커 이미지
- COMMAND : 컨테이너 시작시 실행될 명령어로, 대부분 내장되어 있으므로 별도 설정 필요가 없다.
- CREATED : 컨테이너 생성 식나
- STATUS : 컨테이너의 상태로 실행중은 Up, 종료는 Exited, 일시정지는 Pause로 나온다.
- PORTS : 컨테이너가 개방한 포트와 호스트에 연결한 포트로, 특별한 설정을 하지 않은 경우 출력되지 않는다.
- NAMES : 컨테이너 고유한 이름으로 컨테이너 생성시 `--name` 옵션으로 이름을 설정하지 않으면 도커 엔진이 임의로 형용사와 명사를 조합해서 설정한다. id와 마찬가지로 중복이 안되고 `docker rename` 명령어로 이름을 변경할 수 있다. ex) `docker rename origianl-name changed-name`  

### 원하는 항목만 보기

`docker ps --format 'table{{.Names}} \t 'table{{.Image}}`  
이러한 명령어로 원하는 항목만 볼 수 있다. --format 옵션을 사용하여 Names와 Image 항목만 볼 수 있다. 이때의 `\t`는 탭 공백을 의미한다.  

이외 모든 항목을 보고자 할때는 `docker ps -a`을 사용하면 된다. `-a`는 all을 뜻하며, 꺼져있는 컨테이너도 확인할 수 있다.  


## 도커 컨테이너의 생명 주기

생명주기  

생성 -> 시작 -> 실행 -> 중지 -> 삭제  

### 생성부터 실행까지

`docker run` = `docker create <이미지 이름>` + `docker start <컨테이너 아이디/이름>`  

`docker create`을 사용하면 컨테이너의 ID가 출력이 된다. 이후 컨테이너의 아이디 중 일부를 `docker start` 뒤에 붙여주면 된다. 이때 `docker start`에 옵션이 존재하는데 바로 `-a` 옵션이다. 이것은 attach을 의미하며 실행이 될 때 붙어있다가 출력값들을 화면에 출력시킬 수 있게 보내주는 옵션이다. 이 옵션이 없이 `docker start ID`만 입력하게 되면 컨테이너 ID만 다시 출력하고 끝나게 된다.  